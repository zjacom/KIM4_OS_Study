
디버깅은 하드웨어와 소프트웨어에서의 시스템의 오류를 발견하고 수정하는 행위이다.
성능 문제는 버그로 간주되므로 시스템에서 처리 중에 발생하는 병목 현상을 제거하여 성능을 향상 시키는 성능 조정도 디버깅에 포함된다.

## 장애 분석

프로세스가 실패하면 운영체제는 오류 정보를 로그 파일에 기록하고, 메모리를 캡처한 **코어 덤프**를 저장해 이후 분석에 활용한다. 커널 장애는크래시(Crash)라고 하며, 이때도 로그와 메모리 상태를 크래시 덤프에 저장한다.

운영체제와 프로세스의 디버깅은 서로 다른 도구와 기법을 사용합니다. 파일 시스템 오류로 인한 커널 장애는 위험을 방지하기 위해, 커널 메모리 상태를 파일 시스템이 없는 디스크에 저장한다. 이후 재부팅 시 이 데이터를 수집해 분석용 크래시 덤프 파일에 기록한다. 이는 사용자 수준 프로세스 디버깅에서는 필요하지 않은 방식이다.

---
## 성능 관찰 및 조정

**성능 조정**은 처리 병목 지점을 제거하여 성능을 개선하는 과정이다. 이를 위해 시스템 성능을 감시하고 측정할 수 있는 도구가 필요하며, 도구는 **카운터** 또는 **추적** 방식을 사용한다.

#### 카운터

운영체제는 **시스템 콜 횟수**나 **디스크 작업** 같은 활동을 카운터로 추적한다. Linux에서는 `/proc` 파일 시스템을 통해 프로세스 및 커널 통계를 읽는다.

프로세스별
- ps - 하나의 프로세스 또는 선택된 프로세스에 대한 정보를 보고한다.
- top - 현재 프로세스에 대한 실시간 통계를 보고한다.

시스템 전체
- vmstat - 메모리 사용량 통계를 보고한다.
- netstat - 네트워크 인터페이스에 대한 통계를 보고한다.
- iostat - 디스크의 I/O 사용량을 보고한다.

Windows
- 작업 관리자

---
## 추적

추적 도구는 시스템 콜과 관련된 특정 이벤트의 데이터를 수집한다.

프로세스별
- strace - 프로세스에 의해 호출된 시스템 콜을 추적한다.
- gdb - 소스 레벨 디버거

시스템 전체
- perf - 리눅스 성능 도구 모음
- tcpdump - 네트워크 패킷을 수집한다.

이와 같은 성능 도구들은 운영체제의 성능을 이해하고 조정하는 데 큰 도움이 된다.

___
## BCC

**BCC (Berkeley Packet Filter Compiler Collection)**는 **eBPF** 기술을 사용해 Linux 시스템에서 추적 및 성능 관찰을 쉽게 할 수 있도록 해주는 도구입니다.

#### eBPF 기술

- 1990년대에 개발된 네트워크 트래픽 필터링 기술로, **eBPF** 프로그램은 C의 부분집합으로 작성되어 **Linux 커널**에 동적으로 삽입됩니다.
- **검증기**를 통해 시스템 성능 및 보안에 영향을 주지 않는지 확인된 후에만 실행됩니다.

#### BCC 기능

- **BCC**는 eBPF 프로그램을 더 쉽게 작성할 수 있도록 **Python**을 사용한 인터페이스를 제공합니다.
- BCC 도구는 **probe**와 **tracepoint**를 사용해 커널 이벤트를 추적하고, 성능 문제나 보안 문제를 진단하는 데 유용합니다.

이 도구는 실제 운영 중인 시스템에서 성능 저하 없이 사용할 수 있어, 시스템 관리자에게 매우 강력한 도구입니다.



[[08. 운영체제 빌딩과 부팅]]